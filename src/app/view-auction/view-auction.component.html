<div>
  <br>
  <button mat-raised-button color="primary" (click)="newAuctionButton()">Create New Auction</button>
  <br><br>
  <mat-divider></mat-divider>
  <br>
  <table mat-table [dataSource]="auctionData" class="mat-elevation-z8">

    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>Item</th>
      <td mat-cell *matCellDef="let auction"> {{auction.name}} </td>
    </ng-container>

    <ng-container matColumnDef="desc">
      <th mat-header-cell *matHeaderCellDef>Description</th>
      <td mat-cell *matCellDef="let auction"> {{auction.description}} </td>
    </ng-container>

    <ng-container matColumnDef="currentBid">
      <th mat-header-cell *matHeaderCellDef>Current bid €</th>
      <td mat-cell *matCellDef="let auction"> {{auction.currently}} </td>
    </ng-container>

    <ng-container matColumnDef="noOfBids">
      <th mat-header-cell *matHeaderCellDef># of bids</th>
      <td mat-cell *matCellDef="let auction"> {{auction.numberOfBids}} </td>
    </ng-container>

    <ng-container matColumnDef="buyPrice">
      <th mat-header-cell *matHeaderCellDef>Buy price €</th>
      <td mat-cell *matCellDef="let auction"> {{auction.buyPrice || 'None'}} </td>
    </ng-container>

    <ng-container matColumnDef="firstBid">
      <th mat-header-cell *matHeaderCellDef>First Bid €</th>
      <td mat-cell *matCellDef="let auction"> {{auction.firstBid}} </td>
    </ng-container>

    <ng-container matColumnDef="seller">
      <th mat-header-cell *matHeaderCellDef>Seller</th>
      <td mat-cell *matCellDef="let auction"> {{auction.seller.username}} </td>
    </ng-container>

    <ng-container matColumnDef="sellerRat">
      <th mat-header-cell *matHeaderCellDef>Seller's rating</th>
      <td mat-cell *matCellDef="let auction"> {{auction.seller.rating}} </td>
    </ng-container>

    <ng-container matColumnDef="location">
      <th mat-header-cell *matHeaderCellDef>Location</th>
      <td mat-cell *matCellDef="let auction"> {{auction.location}} </td>
    </ng-container>

    <ng-container matColumnDef="country">
      <th mat-header-cell *matHeaderCellDef>Country</th>
      <td mat-cell *matCellDef="let auction"> {{auction.country}} </td>
    </ng-container>

    <ng-container matColumnDef="startTime">
      <th mat-header-cell *matHeaderCellDef>Start time</th>
      <td mat-cell *matCellDef="let auction"> {{auction.started | date:'medium'}} </td>
    </ng-container>

    <ng-container matColumnDef="endTime">
      <th mat-header-cell *matHeaderCellDef>End time</th>
      <td mat-cell *matCellDef="let auction"> {{auction.ends | date:'medium'}} </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
  <br><br>
  <table *ngIf='ifBids' mat-table [dataSource]="auctionData[0].bids" class="mat-elevation-z8">

    <ng-container matColumnDef="amount">
      <th mat-header-cell *matHeaderCellDef>Amount</th>
      <td mat-cell *matCellDef="let bid"> {{bid.amount}} </td>
    </ng-container>

    <ng-container matColumnDef="bidder">
      <th mat-header-cell *matHeaderCellDef>Bidder</th>
      <td mat-cell *matCellDef="let bid"> {{bid.bidder.username}} </td>
    </ng-container>

    <ng-container matColumnDef="bidRat">
      <th mat-header-cell *matHeaderCellDef>Bidder's rating</th>
      <td mat-cell *matCellDef="let bid"> {{bid.bidder.rating}} </td>
    </ng-container>

    <ng-container matColumnDef="time">
      <th mat-header-cell *matHeaderCellDef>Time</th>
      <td mat-cell *matCellDef="let bid"> {{bid.time | date:'medium'}} </td>
    </ng-container>

    <ng-container matColumnDef="location">
      <th mat-header-cell *matHeaderCellDef>Location</th>
      <td mat-cell *matCellDef="let bid"> {{bid.bidder.location}} </td>
    </ng-container>

    <ng-container matColumnDef="country">
      <th mat-header-cell *matHeaderCellDef>Country</th>
      <td mat-cell *matCellDef="let bid"> {{bid.bidder.country}} </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="bidderColumns; sticky: true"></tr>
    <tr mat-row *matRowDef="let row; columns: bidderColumns;"></tr>
  </table>
  <br>
  <button mat-fab color="primary" (click)="onClick(auction)">Bid</button>
  <div [hidden]="!ifClicked">
    <form [formGroup]="bidData" class="form" (ngSubmit)="bid()">
      <mat-form-field class="full-width">
        <input matInput placeholder="Bid Amount" formControlName="amount">
      </mat-form-field>
    </form>
    <button mat-raised-button (click)="bid()">Place Bid</button>
  </div>
  <br>
  <button *ngIf='loggedIn' mat-raised-button (click)="GoToProfile() ">Go to profile</button>
  <button *ngIf='loggedIn' mat-raised-button (click)="logout() ">Logout</button>
  <button *ngIf='!loggedIn' mat-raised-button (click)="logout() ">Login</button>
  <br><br>
</div>